var TSCompiler;
(function(e){function l(a,b){"undefined"==typeof b&&(b=new i);var d=new TypeScript.CompilationSettings;d.generateDeclarationFiles=!0===a.produceDeclarations;d=new TypeScript.TypeScriptCompiler(b.emittedUnits.getDefaultStream(),null,new TypeScript.NullLogger,d);d.parser.errorRecovery=!0;d.setErrorCallback(b.getErrorCallback());for(var f=0;f<a.units.length;f++){var g=a.units[f];d.addUnit(g.data,g.name)}d.typeCheck();d.emit(!0,b.emittedUnits.getEmitCallback());return b.emittedUnits.getDefJS()}function h(a,
b,d){b||(b={units:[]});b.units.push({data:a,name:""});return l(b,d)}function k(a){var b=document.createElement("script");b.setAttribute("type","text/javascript");b.innerHTML=a;document.body.appendChild(b)}function m(a,b,d){"string"==typeof a&&(a=document.getElementById(a));if(!a||!a.tagName||"script"!=a.tagName.toLowerCase())throw Error("Invalid script block.");a=h(a.innerHTML,b,d);k(a)}function n(a,b){var d=!0,f=null;if(document.querySelectorAll){for(var d=!1,f="",g=0,c=a.length;g<c;g++)f+='script[type="'+
a[g]+'"]',g!=c-1&&(f+=",");f=document.querySelectorAll(f)}else f=document.getElementsByTagName("script");g=0;for(c=f.length;g<c;g++){var e=f[g];if(d){for(var j=e.getAttribute("type").toLowerCase(),i=!1,h=0,k=a.length;h<k;h++)if(j==a[h]){i=!0;break}if(!i)continue}b(e)}}function p(a,b,d,f,c){d||(d=function(){});"undefined"==typeof b&&(b=!0);if("undefined"==typeof c||null===c)c=new i;var e=new XMLHttpRequest;e.open("GET",a);e.onreadystatechange=function(){if(4==e.readyState)if(200==e.status){var a=h(e.responseText,
f,c);b&&k(a);d({result:a,compileInfo:c})}else d({error:!0})};e.send(null)}e.API_VERSION=0.1;var i,c=function(){this.errors=[];this.emittedUnits=new q};c.prototype.addError=function(a,b,d,c){this.errors.push({start:a,len:b,msg:d,block:c})};c.prototype.getErrorCallback=function(){var a=this;return function(){a.addError.apply(a,arguments)}};c.prototype.getErrorCount=function(){return this.errors.length};c.prototype.addOutputUnit=function(){};i=c;e.CompileInfo=i;var j=function(){this.data=""};j.prototype.Write=
function(a){this.data+=a};j.prototype.WriteLine=function(a){this.data+=a+"\n"};j.prototype.Close=function(){};var q,c=function(){this.units={};this.units[".js"]=new j};c.prototype.getEmitCallback=function(){var a=this;return function(b){return a.emitCallback.apply(a,[b])}};c.prototype.emitCallback=function(a){"undefined"==typeof this.units[a]&&(this.units[a]=new j);return this.units[a]};c.prototype.getDefaultStream=function(){return this.units[".js"]};c.prototype.getDefJS=function(){return this.units[".js"].data};
c.prototype.getDefDecl=function(){return this.units[".d.ts"]?this.units[".d.ts"].data:""};c.prototype.getUnit=function(a){return this.units[a].data};c.prototype.getAllUnits=function(){return this.units};q=c;e.compile=l;e.compileStr=h;e.runStr=function(a,b,c){a=h(a,b,c);k(a);return a};e.insertScriptBlock=k;e.runScriptBlock=m;e.filterScriptBlocks=n;e.runAllScriptBlocks=function(a,b,c){if("undefined"==typeof a||null===a)a=["text/typescript","application/typescript"];n(a,function(a){a.src?p(a.src):m(a,
b,c)})};e.compileExtern=p})(TSCompiler||(TSCompiler={}));
