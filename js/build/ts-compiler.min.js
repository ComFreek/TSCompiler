var TSCompiler;
(function(f){function l(a,b){"undefined"==typeof b&&(b=new k);var c=new TypeScript.TypeScriptCompiler(b.outStream);c.parser.errorRecovery=!0;c.setErrorCallback(b.getErrorCallback());for(var h=0;h<a.units.length;h++){var d=a.units[h];c.addUnit(d.data,d.name)}c.typeCheck();c.emit(!1,function(){return b.outStream});return b.outStream.data}function j(a,b,c){b||(b={units:[]});b.units.push({data:a,name:""});return l(b,c)}function i(a){var b=document.createElement("script");b.setAttribute("type","text/javascript");
b.innerHTML=a;document.body.appendChild(b)}function m(a,b,c){"string"==typeof a&&(a=document.getElementById(a));if(!a||!a.tagName||"script"!=a.tagName.toLowerCase())throw Error("Invalid script block.");a=j(a.innerHTML,b,c);i(a)}function n(a,b,c,h,d){c||(c=function(){});"undefined"==typeof b&&(b=!0);if("undefined"==typeof d||null===d)d=new k;var e=new XMLHttpRequest;e.open("GET",a);e.onreadystatechange=function(){if(4==e.readyState)if(200==e.status){var a=j(e.responseText,h,d);b&&i(a);c({result:a,
compileInfo:d})}else c({error:!0})};e.send(null)}f.API_VERSION=0.1;var k,g=function(){this.errors=[];this.outStream=new p};g.prototype.addError=function(a,b,c,h){this.errors.push({start:a,len:b,msg:c,block:h})};g.prototype.getErrorCallback=function(){var a=this;return function(){a.addError.apply(a,arguments)}};g.prototype.getErrorCount=function(){return this.errors.length};k=g;f.CompileInfo=k;var p,g=function(){this.data=""};g.prototype.Write=function(a){this.data+=a};g.prototype.WriteLine=function(a){this.data+=
a+"\n"};g.prototype.Close=function(){};p=g;f.compile=l;f.compileStr=j;f.runStr=function(a,b,c){a=j(a,b,c);i(a);return a};f.insertScriptBlock=i;f.runScriptBlock=m;f.runAllScriptBlocks=function(a,b,c){if("undefined"==typeof a||null===a)a=["text/typescript","application/typescript"];var h=!0,d=null;if(document.querySelectorAll){for(var h=!1,d="",e=0,f=a.length;e<f;e++)d+='script[type="'+a[e]+'"]',e!=f-1&&(d+=",");d=document.querySelectorAll(d)}else d=document.getElementsByTagName("script");e=0;for(f=
d.length;e<f;e++){var g=d[e];if(h){for(var k=g.getAttribute("type").toLowerCase(),j=!1,i=0,l=a.length;i<l;i++)if(k==a[i]){j=!0;break}if(!j)continue}g.src?n(g.src):m(g,b,c)}};f.compileExtern=n})(TSCompiler||(TSCompiler={}));
