var TSCompiler;
(function(g){function l(a,b){"undefined"==typeof b&&(b=new k);var d=new TypeScript.CompilationSettings;d.generateDeclarationFiles=!0===a.produceDeclarations;d=new TypeScript.TypeScriptCompiler(b.emittedUnits.getDefaultStream(),null,new TypeScript.NullLogger,d);d.parser.errorRecovery=!0;d.setErrorCallback(b.getErrorCallback());for(var c=0;c<a.units.length;c++){var e=a.units[c];d.addUnit(e.data,e.name)}d.typeCheck();d.emit(!0,b.emittedUnits.getEmitCallback());return b.emittedUnits.getDefJS()}function j(a,
b,d){b||(b={units:[]});b.units.push({data:a,name:""});return l(b,d)}function i(a){var b=document.createElement("script");b.setAttribute("type","text/javascript");b.innerHTML=a;document.body.appendChild(b)}function m(a,b,d){"string"==typeof a&&(a=document.getElementById(a));if(!a||!a.tagName||"script"!=a.tagName.toLowerCase())throw Error("Invalid script block.");a=j(a.innerHTML,b,d);i(a)}function n(a,b,d,c,e){d||(d=function(){});"undefined"==typeof b&&(b=!0);if("undefined"==typeof e||null===e)e=new k;
var f=new XMLHttpRequest;f.open("GET",a);f.onreadystatechange=function(){if(4==f.readyState)if(200==f.status){var a=j(f.responseText,c,e);b&&i(a);d({result:a,compileInfo:e})}else d({error:!0})};f.send(null)}g.API_VERSION=0.1;var k,c=function(){this.errors=[];this.emittedUnits=new p};c.prototype.addError=function(a,b,d,c){this.errors.push({start:a,len:b,msg:d,block:c})};c.prototype.getErrorCallback=function(){var a=this;return function(){a.addError.apply(a,arguments)}};c.prototype.getErrorCount=function(){return this.errors.length};
c.prototype.addOutputUnit=function(){};k=c;g.CompileInfo=k;var h=function(){this.data=""};h.prototype.Write=function(a){this.data+=a};h.prototype.WriteLine=function(a){this.data+=a+"\n"};h.prototype.Close=function(){};var p,c=function(){this.units={};this.units[".js"]=new h};c.prototype.getEmitCallback=function(){var a=this;return function(b){return a.emitCallback.apply(a,[b])}};c.prototype.emitCallback=function(a){"undefined"==typeof this.units[a]&&(this.units[a]=new h);return this.units[a]};c.prototype.getDefaultStream=
function(){return this.units[".js"]};c.prototype.getDefJS=function(){return this.units[".js"].data};c.prototype.getDefDecl=function(){return this.units[".d.ts"]?this.units[".d.ts"].data:""};c.prototype.getUnit=function(a){return this.units[a].data};c.prototype.getAllUnits=function(){return this.units};p=c;g.compile=l;g.compileStr=j;g.runStr=function(a,b,d){a=j(a,b,d);i(a);return a};g.insertScriptBlock=i;g.runScriptBlock=m;g.runAllScriptBlocks=function(a,b,d){if("undefined"==typeof a||null===a)a=["text/typescript",
"application/typescript"];var c=!0,e=null;if(document.querySelectorAll){for(var c=!1,e="",f=0,g=a.length;f<g;f++)e+='script[type="'+a[f]+'"]',f!=g-1&&(e+=",");e=document.querySelectorAll(e)}else e=document.getElementsByTagName("script");f=0;for(g=e.length;f<g;f++){var h=e[f];if(c){for(var k=h.getAttribute("type").toLowerCase(),j=!1,i=0,l=a.length;i<l;i++)if(k==a[i]){j=!0;break}if(!j)continue}h.src?n(h.src):m(h,b,d)}};g.compileExtern=n})(TSCompiler||(TSCompiler={}));
